<div
  class="flex items-center gap-4 w-full p-4 hover:bg-gray-100 dark:hover:bg-zinc-800 transition rounded-xl"
>
  <div class="relative">
    <!-- Avatar -->
    <img
      [src]="messagePreview.profilePicture"
      [alt]="messagePreview.chatName"
      class="w-[60px] h-[60px] rounded-full object-cover"
    />
    <div
      class="w-[12px] h-[12px] rounded-full bg-green-500 absolute right-1 bottom-0"
      *ngIf="messagePreview.status === 'Online'"
    ></div>
  </div>

  <!-- Message Content -->
  <div class="flex flex-col flex-1">
    <!-- Chat Name & Timestamp -->
    <div class="flex justify-between items-center w-full">
      <p
        [ngClass]="{
          'font-bold text-gray-900 dark:text-white': !messagePreview.read,
          'font-medium text-gray-700 dark:text-gray-300': messagePreview.read
        }"
      >
        {{ messagePreview.chatName }}
      </p>
      <p class="text-xs text-gray-500 dark:text-gray-400">
        {{ messagePreview.lastMessage.timestamp.toDate() | date : "shortTime" }}
      </p>
    </div>

    <!-- Message Preview Line -->
    <div
      [ngClass]="{
        'text-gray-800 dark:text-gray-200 font-semibold': !messagePreview.read,
        'text-gray-600 dark:text-gray-400': messagePreview.read
      }"
      class="flex text-sm overflow-hidden whitespace-nowrap"
    >
      <ng-container
        *ngIf="messagePreview.lastMessage.type === 'Text'; else media"
      >
        <span
          *ngIf="
            messagePreview.chatName !== messagePreview.lastMessage.senderName
          "
          class="pr-1"
        >
          {{ messagePreview.lastMessage.senderNickName }}:
        </span>
        <span
          *ngIf="messagePreview.lastMessage.text.length < 20; else longMessage"
        >
          {{ messagePreview.lastMessage.text }}
        </span>
        <ng-template #longMessage>
          {{ messagePreview.lastMessage.text.slice(0, 20) }}...
        </ng-template>
      </ng-container>

      <ng-template #media>
        <span
          *ngIf="
            messagePreview.chatName !== messagePreview.lastMessage.senderName
          "
          class="pr-1"
        >
          {{ messagePreview.lastMessage.senderNickName }}:
        </span>
        <span>
          sent a
          {{ messagePreview.lastMessage.type === "Image" ? "photo" : "file" }}
        </span>
      </ng-template>
    </div>
  </div>
</div>
